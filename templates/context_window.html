<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversation Context Window | NWNX:EE Chatbot</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">
    <style>
        .diagram-container {
            text-align: center;
            margin: 2rem 0;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .feature-card {
            border-left: 4px solid #2196f3;
            background-color: #f5f9ff;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0 4px 4px 0;
        }
        .feature-icon {
            font-size: 1.5rem;
            color: #2196f3;
            margin-right: 0.5rem;
        }
        .step-card {
            border-radius: 8px;
            border: 1px solid #ddd;
            padding: 1rem;
            margin-bottom: 1rem;
            position: relative;
            padding-left: 3rem;
        }
        .step-number {
            position: absolute;
            left: -15px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background-color: #4caf50;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            border: 2px solid white;
        }
    </style>
</head>
<body>
    <nav class="navbar" style="background-color: #343a40; color: white; padding: 10px;">
        <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
            <span>NWN Persona Web Documentation</span>
            <a href="{{ url_for('index') }}" style="color: #ffffff; text-decoration: none;">Return to App</a>
        </div>
    </nav>
    
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4 text-center">Conversation Context Window</h1>
                <p class="lead text-center">Enhancing AI character responses with intelligent conversation history</p>
                
                    
                    <div class="mt-4 p-3 bg-light border rounded">
                        <h4 class="text-center mb-3">Conversation Context Window</h4>
                        <p class="text-center"><em>How context improves AI character responses</em></p>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <div class="card mb-3">
                                    <div class="card-header bg-primary text-white">
                                        <strong>Chat History</strong>
                                    </div>
                                    <div class="card-body">
                                        <p><strong>Hazel:</strong> Good morning! Beautiful day, isn't it?</p>
                                        <p><strong>Norfind:</strong> Indeed. The sky is particularly clear.</p>
                                        <p><strong>Hazel:</strong> Have you visited the market today?</p>
                                        <p><strong>Norfind:</strong> Not yet. Is there something special?</p>
                                        <p class="bg-warning p-2 rounded"><strong>Hazel:</strong> New shipment of spices from Calimshan!</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card mb-3">
                                    <div class="card-header bg-success text-white">
                                        <strong>AI Response Generation</strong>
                                    </div>
                                    <div class="card-body">
                                        <p class="text-primary"><strong>Context Messages:</strong></p>
                                        <ul>
                                            <li>3-4 messages from specific player</li>
                                            <li>2-3 messages from recent conversation</li>
                                            <li>Sorted chronologically</li>
                                        </ul>
                                        <hr>
                                        <p class="text-success"><strong>Generated Responses:</strong></p>
                                        <ol>
                                            <li>"Calimshan spices? I must investigate."</li>
                                            <li>"Ah, excellent! Their cinnamon is quite renowned in scholarly circles."</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-5">
                    <div class="col-md-6">
                        <h2>Overview</h2>
                        <p>The Conversation Context Window is a feature that enhances AI-generated responses by providing relevant conversation history to the AI model. This allows the AI to understand the flow of conversation and generate more coherent, contextually appropriate responses for your Neverwinter Nights characters.</p>
                        
                        <h2 class="mt-4">How It Works</h2>
                        <div class="step-card">
                            <div class="step-number">1</div>
                            <h5>Collect Character-Specific Context</h5>
                            <p>The system automatically collects the last 3-4 messages from the specific player you're responding to, capturing their conversation thread.</p>
                        </div>
                        
                        <div class="step-card">
                            <div class="step-number">2</div>
                            <h5>Add Recent Conversation</h5>
                            <p>It then adds the last 2-3 messages from the overall conversation to provide immediate context, regardless of speaker.</p>
                        </div>
                        
                        <div class="step-card">
                            <div class="step-number">3</div>
                            <h5>Smart Processing</h5>
                            <p>These messages are combined with duplicates removed, then sorted chronologically to maintain conversation flow.</p>
                        </div>
                        
                        <div class="step-card">
                            <div class="step-number">4</div>
                            <h5>AI Integration</h5>
                            <p>The context is sent to the AI model along with your character's profile and the selected message, enabling more coherent responses.</p>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <h2>Benefits</h2>
                        
                        <div class="feature-card">
                            <h5><i class="bi bi-chat-dots feature-icon"></i> Conversation Continuity</h5>
                            <p>The AI can understand and reference previous exchanges, creating a natural flow of dialogue.</p>
                        </div>
                        
                        <div class="feature-card">
                            <h5><i class="bi bi-person-fill feature-icon"></i> Character Consistency</h5>
                            <p>By seeing its own previous responses, your character maintains a consistent persona throughout the conversation.</p>
                        </div>
                        
                        <div class="feature-card">
                            <h5><i class="bi bi-tag-fill feature-icon"></i> Topical Awareness</h5>
                            <p>The AI can follow conversation topics across multiple messages and maintain thematic consistency.</p>
                        </div>
                        
                        <div class="feature-card">
                            <h5><i class="bi bi-arrow-repeat feature-icon"></i> Reduced Repetition</h5>
                            <p>The AI avoids repeating information that was already mentioned in previous messages.</p>
                        </div>
                        
                        <div class="feature-card">
                            <h5><i class="bi bi-chat-square-text feature-icon"></i> More Natural Dialogue</h5>
                            <p>Responses feel more like part of a flowing conversation rather than isolated replies.</p>
                        </div>
                        
                        <h2 class="mt-4">User Interface</h2>
                        <p>The context window feature works seamlessly within the existing interface. When you select a player message, you'll see a blue badge that indicates how many context messages will be included (e.g., "+5 context"). No additional configuration is required.</p>
                    </div>
                </div>
                
                <div class="row mt-5">
                    <div class="col-12">
                        <h2>Best Practices</h2>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-3">
                                    <div class="card-header bg-success text-white">
                                        <h5 class="mb-0"><i class="bi bi-check-circle-fill"></i> Recommended</h5>
                                    </div>
                                    <div class="card-body">
                                        <ul>
                                            <li>Allow conversation to flow naturally in-game</li>
                                            <li>Select recent messages to respond to whenever possible</li>
                                            <li>Pay attention to the context badge to see how much history is being included</li>
                                            <li>Engage in focused conversations for best context relevance</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card mb-3">
                                    <div class="card-header bg-danger text-white">
                                        <h5 class="mb-0"><i class="bi bi-exclamation-triangle-fill"></i> Avoid</h5>
                                    </div>
                                    <div class="card-body">
                                        <ul>
                                            <li>Selecting very old messages from far back in the conversation</li>
                                            <li>Abruptly changing topics without acknowledgment</li>
                                            <li>Refreshing the page frequently (clears session context)</li>
                                            <li>Responding to system messages rather than character dialogue</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-4">
                    <div class="col-12 text-center">
                        <p class="mt-4">The context window feature significantly improves the quality and consistency of AI-generated character responses without requiring any additional effort from users.</p>
                        <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg mt-3">
                            <i class="bi bi-arrow-left"></i> Return to App
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="mt-5 py-3 bg-dark text-center text-white">
        <div class="container">
            <p class="mb-0">NWN Persona Web &copy; 2023 - Context Window Documentation</p>
        </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 